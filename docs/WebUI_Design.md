# WebUI 画面設計書

## 1. 画面設計概要

### 1.1 メイン画面構成
```
┌─────────────────────────────────────────────────────────────────┐
│                        Header Navigation                        │
│  [Logo] [Dashboard] [Data] [Models] [Training] [Prediction]     │
│         [Experiments] [Analysis] [Settings] [Profile(Future)]   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│                        Main Content Area                        │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│                         Footer                                 │
│               Status Bar | Notifications                       │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 各画面詳細設計

### 2.1 ダッシュボード画面
**目的**: システム全体の概要と現在の状況を把握

```
┌─────────────────────────────────────────────────────────────────┐
│                         Dashboard                               │
├─────────────────────┬───────────────────┬─────────────────────┤
│   Active Models     │   Recent Training │   Anomaly Alerts    │
│  ┌───────────────┐  │  ┌─────────────┐  │  ┌───────────────┐  │
│  │ Model-001     │  │  │ Session-123 │  │  │ HIGH ANOMALY  │  │
│  │ Status: Ready │  │  │ Progress:85%│  │  │ Layer-5       │  │
│  │ Accuracy:92.1%│  │  │ ETA: 2h     │  │  │ Score: 0.95   │  │
│  └───────────────┘  │  └─────────────┘  │  └───────────────┘  │
├─────────────────────┼───────────────────┼─────────────────────┤
│   Performance Metrics (Real-time Chart)                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │     [Loss Curve] [Accuracy] [Anomaly Count]            │   │
│  │  ┌─────────────────────────────────────────────────┐   │   │
│  │  │                                                 │   │   │
│  │  │           Real-time Chart Area                  │   │   │
│  │  │                                                 │   │   │
│  │  └─────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

**表示データ:**
- アクティブなモデル一覧とステータス
- 進行中の学習セッション状況
- 異常検知アラート（驚きの度合い）
- リアルタイムパフォーマンスメトリクス

---

### 2.2 データ管理画面
**目的**: FX価格データのアップロード・管理・前処理

```
┌─────────────────────────────────────────────────────────────────┐
│                      Data Management                            │
├─────────────────────┬───────────────────────────────────────────┤
│   Upload Data       │            Data List                     │
│  ┌───────────────┐  │  ┌─────────────────────────────────────┐ │
│  │ Drag & Drop   │  │  │ Name    │ Type │ Size │ Status │ Action│ │
│  │ CSV/JSON Files│  │  │ USDJPY  │ 1H   │ 2MB  │ Ready │ [View]│ │
│  │               │  │  │ EURJPY  │ 1H   │ 1.5MB│ Process│[Edit]│ │
│  │ [Browse Files]│  │  │ GBPJPY  │ 1H   │ 1.8MB│ Ready │[Del] │ │
│  └───────────────┘  │  └─────────────────────────────────────────┘ │
├─────────────────────┼───────────────────────────────────────────┤
│   Data Preview                                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ DateTime    │ Open   │ High   │ Low    │ Close  │ Volume│   │
│  │ 2025-01-01  │ 150.25 │ 150.45 │ 150.10 │ 150.30 │ 1000 │   │
│  │ 2025-01-02  │ 150.30 │ 150.60 │ 150.20 │ 150.55 │ 1200 │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│   Preprocessing Options                                         │
│  [✓] Normalization  [✓] Moving Average  [ ] Remove Outliers    │
│  Sequence Length: [100] Window Size: [20] [Apply Preprocessing] │
└─────────────────────────────────────────────────────────────────┘
```

**入力データ形式:**
- CSV: DateTime, Open, High, Low, Close, Volume
- JSON: タイムスタンプ付き価格データ
- リアルタイムAPI連携（将来対応）

---

### 2.3 モデル管理画面
**目的**: Transformerモデルの作成・設定・管理

```
┌─────────────────────────────────────────────────────────────────┐
│                      Model Management                           │
├─────────────────────┬───────────────────────────────────────────┤
│   Create New Model  │            Model List                    │
│  ┌───────────────┐  │  ┌─────────────────────────────────────┐ │
│  │ Name: _______ │  │  │ ID   │ Name    │ Status │ Accuracy │ │
│  │ Desc: _______ │  │  │ M001 │ FX-Base │ Ready  │ 89.2%   │ │
│  │ Architecture: │  │  │ M002 │ FX-Adv  │ Train  │ -       │ │
│  │ [Transformer] │  │  │ M003 │ FX-Test │ Ready  │ 91.5%   │ │
│  │ [Create]      │  │  └─────────────────────────────────────────┘ │
│  └───────────────┘  │                                             │
├─────────────────────┼───────────────────────────────────────────┤
│   Model Configuration                                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ Model Parameters:                                       │   │
│  │ d_model: [512]  n_heads: [8]   n_layers: [6]          │   │
│  │ dropout: [0.1]  max_seq_len: [1000]                   │   │
│  │                                                         │   │
│  │ VUS Configuration:                                      │   │
│  │ window_size: [100]  threshold: [0.95]                 │   │
│  │ min_samples: [50]                                      │   │
│  │                                                         │   │
│  │ Learning Rate Configuration:                            │   │
│  │ base_lr: [0.001]  neighbor_radius: [2]                │   │
│  │ adjustment_factor: [0.5]  min_lr: [1e-6]              │   │
│  │                                                         │   │
│  │ [Save Configuration] [Load Template]                   │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

### 2.4 学習実行画面
**目的**: モデルの学習実行・監視・制御

```
┌─────────────────────────────────────────────────────────────────┐
│                      Training Execution                         │
├─────────────────────┬───────────────────────────────────────────┤
│   Training Setup    │            Progress Monitor               │
│  ┌───────────────┐  │  ┌─────────────────────────────────────┐ │
│  │ Model: [M001] │  │  │ Epoch: 45/100  Progress: ████████░░│ │
│  │ Dataset:[USD] │  │  │ Time Elapsed: 2h 15m                │ │
│  │ Epochs: [100] │  │  │ ETA: 3h 20m                         │ │
│  │ Batch:[32]    │  │  │ Current Loss: 0.0234                │ │
│  │ [Start Train] │  │  └─────────────────────────────────────────┘ │
│  │ [Pause] [Stop]│  │                                             │
│  └───────────────┘  │                                             │
├─────────────────────┼───────────────────────────────────────────┤
│   Real-time Metrics                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ [Loss] [Accuracy] [Learning Rate] [Anomaly Count]      │   │
│  │  ┌───────────────────────────────────────────────────┐ │   │
│  │  │                                                   │ │   │
│  │  │        Real-time Training Chart                   │ │   │
│  │  │                                                   │ │   │
│  │  └───────────────────────────────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│   Layer-wise Anomaly Detection                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ Layer │ Anomaly Score │ Threshold │ Status │ LR Adjust │   │
│  │ L01   │ 0.12         │ 0.95      │ Normal │ 1.0x      │   │
│  │ L02   │ 0.87         │ 0.95      │ Normal │ 1.2x      │   │
│  │ L03   │ 0.96         │ 0.95      │ ALERT  │ 0.5x      │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

### 2.5 予測実行画面
**目的**: 学習済みモデルでのFX価格予測実行

```
┌─────────────────────────────────────────────────────────────────┐
│                      Prediction Execution                       │
├─────────────────────┬───────────────────────────────────────────┤
│   Prediction Setup  │            Results                       │
│  ┌───────────────┐  │  ┌─────────────────────────────────────┐ │
│  │ Model: [M001] │  │  │ Next Price: 150.75                  │ │
│  │ Data: [Live]  │  │  │ Confidence: 87.5%                   │ │
│  │ Horizon:[24h] │  │  │ Direction: ↗ UP                    │ │
│  │ [Execute]     │  │  │ Risk Level: Medium                  │ │
│  │ [Auto Mode]   │  │  └─────────────────────────────────────────┘ │
│  └───────────────┘  │                                             │
├─────────────────────┼───────────────────────────────────────────┤
│   Prediction Chart                                              │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                         │   │
│  │        Historical + Predicted Price Chart              │   │
│  │        [Actual] [Predicted] [Confidence Band]          │   │
│  │                                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│   Anomaly Alerts during Prediction                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ ⚠️ Unusual Pattern Detected at Layer-4                  │   │
│  │ 🚨 High Surprise Score (0.98) - Review Prediction      │   │
│  │ ℹ️ Model Adjusted Learning Rate for 3 Neurons          │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

### 2.6 実験比較画面
**目的**: 複数の実験結果の比較・分析

```
┌─────────────────────────────────────────────────────────────────┐
│                      Experiment Comparison                      │
├─────────────────────────────────────────────────────────────────┤
│   Experiment Selection                                          │
│  [✓] Exp-001: VUS Strategy    [✓] Exp-002: Statistical         │
│  [✓] Exp-003: Baseline       [ ] Exp-004: Hybrid               │
│  [Compare Selected] [Export Report]                             │
├─────────────────────────────────────────────────────────────────┤
│   Performance Comparison                                        │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ Metric      │ VUS    │ Statistical │ Baseline │ Best   │   │
│  │ Accuracy    │ 92.1%  │ 89.3%      │ 85.7%    │ VUS    │   │
│  │ F1-Score    │ 0.891  │ 0.856      │ 0.823    │ VUS    │   │
│  │ Training T. │ 2h 45m │ 1h 30m     │ 1h 15m   │ Base   │   │
│  │ Surprise Det│ 156    │ 89         │ 23       │ VUS    │   │
│  └─────────────────────────────────────────────────────────┘   │
├─────────────────────────────────────────────────────────────────┤
│   Visual Comparison                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                                                         │   │
│  │        Multi-line Chart Comparison                      │   │
│  │        [Loss Curves] [Accuracy] [Anomaly Detection]     │   │
│  │                                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 3. ユーザーフロー設計

### 3.1 基本フロー（認証なし版）
```
[システム起動] → [ダッシュボード]
                      │
    ┌─────────────────┼─────────────────┐
    ▼                 ▼                 ▼
[データ管理]     [モデル管理]      [実験管理]
    │                 │                 │
    ▼                 ▼                 ▼
[データアップ]   [モデル作成]      [実験作成]
    │                 │                 │
    └─────────────────┼─────────────────┘
                      ▼
                 [学習実行]
                      │
                      ▼
                 [予測実行]
                      │
                      ▼
                 [結果分析]
```

### 3.2 将来対応：ユーザー管理フロー
```
[ログイン画面] → [認証] → [ダッシュボード]
      │                        │
      ▼                        ▼
[ユーザー登録]              [マイページ]
                               │
                         [プロジェクト管理]
                               │
                         [チーム共有機能]
```

---

## 4. レスポンシブ対応

### 4.1 ブレークポイント
- Desktop: 1200px以上
- Tablet: 768px - 1199px  
- Mobile: 767px以下

### 4.2 モバイル時の画面調整
- ナビゲーションをハンバーガーメニューに
- チャート表示を縦スクロール対応
- テーブル表示をカード形式に変更

---

次に、クラス設計の詳細化を行います。